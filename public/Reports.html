<html>
<head>

</head>
<body>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
body, html {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #121212;
    color: #e0e0e0;
    height: 100%;
   
}
   .dashboard-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }

        .dashboard-card {
            background-color: #2e2e2e;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            transition: transform 0.3s ease;
            flex: 1 1 calc(25% - 15px); /* Adjust for 4 cards per row */
            min-width: 200px; /* Minimum width for smaller screens */
            max-width: calc(19% - 15px); /* Maximum width to maintain 4 per row */
			height: 156px;
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
        }

        .dashboard-card i {
            font-size: 36px;
            color: #bb86fc;
            margin-bottom: 10px;
        }

        .dashboard-card h3 {
            color: #bb86fc;
            margin: 0;
            font-size: 18px;
        }

        .dashboard-card p {
            font-size: 28px;
            font-weight: bold;
            margin: 10px 0 0;
            color: #03dac6;
        }

        .dashboard-charts {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }

        .dashboard-chart {
            background-color: #2e2e2e;
            border-radius: 8px;
            padding: 20px;
            flex: 1 1 calc(50% - 10px); /* Adjust for 2 charts per row */
            min-width: 300px; /* Minimum width for smaller screens */
        }

        .dashboard-chart h3 {
            color: #bb86fc;
            margin-top: 0;
            margin-bottom: 15px;
        }

        .chart-container {
            height: 300px;
        }
        .sidebar-menu {
    flex-grow: 1;
}
.sidebar-option {
    padding: 15px 20px;
    display: flex;
    align-items: center;
    cursor: pointer;
    transition: background-color 0.3s ease;
    position: relative;
    width: 228px;
}
.chip {
    display: inline-block;
    margin-left: 10px; /* Adjust spacing from the Dashboard */
    padding: 5px 10px;
    font-size: 8px;
    font-weight: bold;
    color: white;
    background-color: grey; /* Orange color for 'Coming Soon' */
    border-radius: 15px;
    transition: background-color 0.3s ease;
}

.chip.primary {
    background-color: grey; /* Define your primary color */
}
</style>
<div class="sidebar-menu">
                <h2 style="color: #bb86fc;
    margin-left: 53px;" >Menu</h2>
	
	 <div class="sidebar-option active" data-target="dashboard" data-tooltip="Dashboard" onclick="navigateTo('Reports.html')" >
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard
                   
                 
                         </span>
                </div>
				  <div class="sidebar-option" data-target="interviews" data-tooltip="Interviews" onclick="navigateTo('pre-screening2.html')">
                    <i class="fas fa-users"></i>
                    <span>Pre-Screening</span>
                </div>
				 <div class="sidebar-option" data-target="candidateInfo" data-tooltip="candidateInfo" onclick="navigateTo('ResumeVerify.html')"  >
               <i class="fas fa-tasks"></i><span>Graduate-Trainees
                    
                 

                    </span>
            </div>
				 <div class="sidebar-option" data-target="candidateInfo" data-tooltip="candidateInfo" onclick="navigateTo('index.html')"  >
               <i class="fas fa-tasks"></i><span>Imocha Results
                    
                 

                    </span>
            </div>
               
                
               
              
                <div class="sidebar-option" data-target="jd-templates" data-tooltip="JD Templates" onclick="navigateTo('Jdtemplates.html')"  >
                    <i class="fas fa-file-alt"></i>
                    <span>JD Templates
                    <div class="chip primary">
                    Coming Soon
                </div>


                    </span>
                </div>
               
               
                
              
              
               <div class="sidebar-option" data-target="candidateInfo" data-tooltip="candidateInfo" onclick="navigateTo('assessment-form-html.html')"  >
               <i class="fas fa-tasks"></i><span>Assessment
                    
                    <div class="chip primary">
                    Coming Soon
                </div>


                    </span>
            </div>
               

               
           
            <div id="technical-panel-option" class="sidebar-option" data-target="technical-panel" data-tooltip="Technical Panel"  onclick="navigateTo('Technicalpanel.html')"  >
                <i class="fas fa-laptop-code"></i>
                <span>Technical Panel
                    
                    <div class="chip primary">
                    Coming Soon
                </div>


                    </span>
            </div>
            <div class="sidebar-option logout-option" data-tooltip="Logout" onclick="navigateTo('login.html')">
            <i class="fas fa-sign-out-alt"></i>
            <span>Logout</span>
            </div>


        </div>
   

  <div id="content">
            <div id="dashboard"  style="
    margin-left: 253px;
    margin-top: -444px;;" >
              
           

                  
                <h2 style="color: #bb86fc;">Dashboard</h2>
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <i class="fas fa-upload"></i>
                        <h3>Profiles Uploaded</h3>
                        <p id="profile-uploads">Loading</p>
                    </div>
                  
                    <div class="dashboard-card">
                        <i class="fas fa-user-check"></i>
                        <h3>Profiles Shortlisted</h3>
 <p id="shortlisted-count">Loading...</p>
                    </div>
                    <div class="dashboard-card">
                        <i class="fas fa-user-times"></i>
						 <h3>Profiles Rejected</h3>
                        <p id="rejected-count">Loading...</p> 
						
                    
                    </div>
					<div class="downloads" style="display: flex; flex-direction: column; align-items: center; gap: 20px; margin-top: -210px;
    margin-left: 727px;">
    <button style="background-color:#2e2e2e; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; display: flex; align-items: center; width: 50%;
    height: 50px;
    font-size: 10px;">
        Download total Report
        <i class="fas fa-download" id="candidateinfo" style="font-size: 30px; margin-left: 10px; color: #bb86fc;font-size: 22px;"></i>
    </button>
    <button style="background-color:#2e2e2e; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; display: flex; align-items: center; width: 54%;
    height: 50px;
    font-size: 10px;">
        Download Prescreening Report
        <i class="fas fa-download" id="imochaTestResults" style="font-size: 30px; margin-left: 10px; color: #bb86fc;font-size: 22px; margin-left:2;"></i>
    </button>
    <button style="background-color:#2e2e2e; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; display: flex; align-items: center; width: 50%;
    height: 50px;
    font-size: 10px;">
        Download Imocha Report
        <i class="fas fa-download" id="imochareport" style="font-size: 30px; margin-left: 10px; color: #bb86fc;font-size: 22px;"></i>
    </button>
</div>


					
	

                </div>
                <div class="dashboard-charts">
                    <div class="dashboard-chart">
                        <h3>Application Status Overview</h3>
                        <div class="chart-container">
                            <canvas id="statusChart"></canvas>
                        </div>
                    </div>
                    <div class="dashboard-chart">
                        <h3>Applications per Job Role</h3>
                        <div class="chart-container">
                            <canvas id="roleChart" ></canvas>
                        </div>
                    </div>
                </div> 
            </div>
<script>
    // Navigate to index.html on clicking the button
   
    function navigateTo(page) {
        window.location.href = page;
    }

    const statusCtx = document.getElementById('statusChart').getContext('2d');
    const roleCtx = document.getElementById('roleChart').getContext('2d');

    // Define variables for counts
    let shortlistedCount = 0;
    let rejectedCount = 0;
    let resumeCount = 0; // This can be updated as needed

    // Create the doughnut chart
    const statusChart = new Chart(statusCtx, {
        type: 'doughnut',
        data: {
            labels: ['Shortlisted', 'Rejected', 'Profiles Uploaded'],
            datasets: [{
                data: [shortlistedCount, rejectedCount, resumeCount],
                backgroundColor: ['#03dac6', '#cf6679', '#bb86fc']
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    position: 'right',
                    labels: {
                        color: '#e0e0e0'
                    }
                }
            }
        }
    });

    // Create the bar chart
    new Chart(roleCtx, {
        type: 'bar',
        data: {
            labels: ['DevOps', 'Platform', 'Migration', 'Cloud Ops'],
            datasets: [{
                label: 'Applications',
                data: [100, 30, 15, 17],
                backgroundColor: '#bb86fc'
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true,
                    ticks: {
                        color: '#e0e0e0'
                    }
                },
                x: {
                    ticks: {
                        color: '#e0e0e0'
                    }
                }
            },
            plugins: {
                legend: {
                    display: false
                }
            }
        }
    });

    // Fetch the total resume count
    async function fetchResumeCount() {
        try {
            const response = await fetch('https://bulk.vercel.app/api/resume-count');
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();
            console.log('Profiles Uploaded:', data.count);
			resumeCount = data.count;
            document.getElementById('profile-uploads').textContent = data.count;
			updateStatusChart();
        } catch (error) {
            console.error('Error fetching resume count:', error);
        }
    }

    // Fetch shortlisted count
    async function fetchShortlistedCount() {
        try {
            const response = await fetch('https://bulk.vercel.app/shortlisted-count');
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();
            console.log('Shortlisted count:', data.shortlisted);
            shortlistedCount = data.shortlisted; // Store the count
            document.getElementById('shortlisted-count').textContent = data.shortlisted;

            // Update chart
            updateStatusChart();
        } catch (error) {
            console.error('Error fetching shortlisted count:', error);
            document.getElementById('shortlisted-count').textContent = 'Error';
        }
    }

    // Fetch rejected count
    async function fetchRejectedCount() {
        try {
            const response = await fetch('https://bulk.vercel.app/rejected-count');
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();
            console.log('Rejected count:', data.rejected);
            rejectedCount = data.rejected; // Store the count
            document.getElementById('rejected-count').textContent = data.rejected;

            // Update chart
            updateStatusChart();
        } catch (error) {
            console.error('Error fetching rejected count:', error);
            document.getElementById('rejected-count').textContent = 'Error';
        }
    }

    // Update the status chart with latest values
    function updateStatusChart() {
        statusChart.data.datasets[0].data = [shortlistedCount, rejectedCount, resumeCount];
        statusChart.update(); // Redraw the chart
    }

    // Call the functions when the page loads
    window.onload = async function() {
        await fetchResumeCount();
        await fetchShortlistedCount();
        await fetchRejectedCount();
    };
	
	document.getElementById('imochaTestResults').addEventListener('click', () => {
        // Call the backend to generate the Excel file
        fetch('https://bulk.vercel.app/download-candidate-info', {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json',
            },
        })
        .then(response => {
            if (response.ok) {
                return response.blob();  // Receive the response as a Blob (binary data)
            } else {
                throw new Error('Failed to download the report.');
            }
        })
        .then(blob => {
            const url = window.URL.createObjectURL(new Blob([blob]));
            const a = document.createElement('a');
            a.href = url;
            a.download = 'Candidate_Info_Report.xlsx';  // Specify the download file name
            document.body.appendChild(a);
            a.click();
            a.remove();  // Remove the anchor element after download
        })
        .catch(error => {
            console.error('Error downloading the report:', error);
        });
    });
	document.getElementById('imochareport').addEventListener('click', () => {
        // Call the backend to generate the Excel file
        fetch('https://bulk.vercel.app/Imocha-candidate-info', {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json',
            },
        })
        .then(response => {
            if (response.ok) {
                return response.blob();  // Receive the response as a Blob (binary data)
            } else {
                throw new Error('Failed to download the report.');
            }
        })
        .then(blob => {
            const url = window.URL.createObjectURL(new Blob([blob]));
            const a = document.createElement('a');
            a.href = url;
            a.download = 'Candidate_Info_Report.xlsx';  // Specify the download file name
            document.body.appendChild(a);
            a.click();
            a.remove();  // Remove the anchor element after download
        })
        .catch(error => {
            console.error('Error downloading the report:', error);
        });
    });
	document.getElementById('candidateinfo').addEventListener('click', () => {
        // Call the backend to generate the Excel file
        fetch('https://bulk.vercel.app/candidate-info', {
            method: 'GET',
            headers: {
                'Content-Type': 'application/json',
            },
        })
        .then(response => {
            if (response.ok) {
                return response.blob();  // Receive the response as a Blob (binary data)
            } else {
                throw new Error('Failed to download the report.');
            }
        })
        .then(blob => {
            const url = window.URL.createObjectURL(new Blob([blob]));
            const a = document.createElement('a');
            a.href = url;
            a.download = 'Candidate_Info_Report.xlsx';  // Specify the download file name
            document.body.appendChild(a);
            a.click();
            a.remove();  // Remove the anchor element after download
        })
        .catch(error => {
            console.error('Error downloading the report:', error);
        });
    });
</script>



</body>
</html>
